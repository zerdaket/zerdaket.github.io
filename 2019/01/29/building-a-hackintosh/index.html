<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="zerdaket, zerdaket@gmail.com"><title>如何打造一台 CustoMac Hackintosh · Zerdaket's Blog</title><meta name="description" content="前言
由于手上这台 MacBook Air 已经使用了有6年之久，性能羸弱早已跟不上，再加上一些场景下还使用 Windows 系统的需求，于是去年国庆期间在狗东和某宝上攒了一台主机装上双系统，Windows 用来打游戏，Mac 用来写代码简直美滋滋。
配置选择
安装 Hackintosh 并不像安装"><meta name="keywords" content="Hexo, Android, Life"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo@2x.png" style="width:127px;"><h3 title=""><a href="/">Zerdaket's Blog</a></h3><div class="description"><p>“这个家伙很懒，什么都没有留下。”</p></div></div></div><ul class="social-links"><li><a href="http://weibo.com/zerdaket"><i class="fa fa-weibo"></i></a></li><li><a href="https://github.com/zerdaket"><i class="fa fa-github"></i></a></li></ul><div class="footer"><a target="_blank" href="/"><span>Theme by </span></a><a href="https://www.caicai.me"> CaiCai </a><span>&</span><a href="https://github.com/Ben02/hexo-theme-Anatole"> Ben</a><div class="by_farbox"><a href="https://hexo.io/zh-cn/" target="_blank">Proudly published with Hexo&#65281;</a></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首页</a></li><li><a href="/archives">归档</a></li><li><a href="/about">关于</a></li><li><a href="/links">友链</a></li></div><div class="information"><div class="back_btn"><li><a onclick="window.history.go(-1)" class="fa fa-chevron-left"> </a></li></div><div class="avatar"><img src="/images/favicon.png"></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>如何打造一台 CustoMac Hackintosh</a></h3></div><div class="post-content"><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><hr>
<p>由于手上这台 MacBook Air 已经使用了有6年之久，性能羸弱早已跟不上，再加上一些场景下还使用 Windows 系统的需求，于是去年国庆期间在狗东和某宝上攒了一台主机装上双系统，Windows 用来打游戏，Mac 用来写代码简直美滋滋。</p>
<h2 id="配置选择"><a href="#配置选择" class="headerlink" title="配置选择"></a>配置选择</h2><hr>
<p>安装 Hackintosh 并不像安装 Windows 那样简单，在一台非苹果设备安装 macOS 是违反最终用户许可协议的。不同于 Windows 强大的兼容性，Mac 系统只为苹果设备服务，系统自带驱动不一定能很好兼容其他设备，所以在挑选配置时最好以苹果设备为例。另外推荐一个网站：<a href="https://www.tonymacx86.com" target="_blank" rel="external">tonymac x86</a> 。网站有官方推荐的配置清单、安装 Hackintosh 时所需要的工具和驱动、详尽的安装教程和论坛网友的成功案例，可以作为选购参考。</p>
<h3 id="1-CPU"><a href="#1-CPU" class="headerlink" title="1.CPU"></a>1.CPU</h3><p>CPU 只能选择牙膏厂（Intel）。虽然按摩店（AMD）的也能装，但是苹果官方都没有出过带 AMD CPU 的产品，想要系统识别并驱动起来这颗芯，还得额外打补丁。另外 AMD 的核显是没有驱动的哦，想要显示器亮起来起码还得配个独显。考虑到这些问题还是老老实实选 Intel 吧。</p>
<p>选定品牌后剩下就简单了，根据使用场景和预算结合 <a href="http://www.mydrivers.com/zhuanti/tianti/cpu/" target="_blank" rel="external">CPU性能天梯图</a> 选择型号。一般来说，同代 CPU 价格越高性能越好。考虑到娱乐需求（在 Windows 下玩游戏）和成本限制，最后我选择了第八代的 i5 8600k 散片，它有着不错的性能以及相对 i7 来说较低的售价。不过不得不说最近牙膏厂涨价太厉害了，相同性能的 AMD CPU 都要便宜得多。</p>
<h3 id="2-主板"><a href="#2-主板" class="headerlink" title="2.主板"></a>2.主板</h3><p>主板里一线品牌有：技嘉、华硕和微星，这几家的高端芯片组用料好，实力更强更稳定。我选择了与八代 Intel CPU 相对应的主板：技嘉 Z370 HD3P，支持超频，接口丰富。</p>
<h3 id="3-显卡"><a href="#3-显卡" class="headerlink" title="3.显卡"></a>3.显卡</h3><p>能驱动的显卡有 Intel 的核显、A卡和N卡，其中如果使用的是最新第九代 Intel 的 U，可能需要修改信息伪装成苹果现有设备支持的 U。如果选择N卡则需要下载 Nvidia 的 WebDriver 官方驱动，目前为止官方驱动还没支持最新的 Mojave 10.14 系统，所以使用N卡的小伙伴只能暂时停留在 10.13 版本了。而A卡是直接免驱的，不需要修改系统信息，插上主板开机就能用。</p>
<p>然后根据自己的需求结合 <a href="http://www.mydrivers.com/zhuanti/tianti/gpu/" target="_blank" rel="external">桌面显卡性能天梯图</a> 选择就可以了。</p>
<h3 id="4-硬盘"><a href="#4-硬盘" class="headerlink" title="4.硬盘"></a>4.硬盘</h3><p>硬盘有机械硬盘和固态硬盘之分：机械硬盘相对于固态硬盘兼容性更好，价格更低廉。固态硬盘比机械硬盘速度更快，但售价会更高。</p>
<p>在主板上常见的有 SATA 和 M.2 两种接口标准，支持 STAT 3.0 协议的接口理论带宽可达到 6 Gb/s，而 M.2 接口更是可以达到 32 Gb/s，在选择硬盘的时候不光要看速度、价格等因素，还要结合主板支持的接口类型考虑。技嘉 Z370 HD3P 带有两个高速 M.2 接口，使得我可以安装两块 SSD，一块硬盘装 Windows 10 ，一块硬盘装 Mac ，两个系统间的引导相互独立互不影响。</p>
<p>在品牌的选择上，机械硬盘西数和希捷很不错，固态硬盘做得好的有 Intel 和三星。</p>
<p>最终我选择了三星的 PM 961 ，即 OEM 版的三星 960 EVO，性能相近但价格便宜一些。其实之前看上了 PM 981 ，但是论坛上这块硬盘装黑苹果有很多问题，无奈只能作罢，使用 SATA 协议的机械硬盘则没有这类问题。所以在装机之前查一查有没有对应的成功案例很重要。</p>
<h3 id="5-内存"><a href="#5-内存" class="headerlink" title="5.内存"></a>5.内存</h3><p>内存没啥好说的，从金士顿、威刚、芝奇这些牌子挑就可以了，我挑了两根芝奇 DDR4 3000 MHz 8G 的 RAM。</p>
<h3 id="6-电源"><a href="#6-电源" class="headerlink" title="6.电源"></a>6.电源</h3><p>尽量挑选转换效率高的电源，因为转换效率越高发热更小，风扇产生的噪音也低，建议直接从金牌以上看起。购买电源时需要考虑余量，为了带动 CPU + 显卡，我选择了额定功率 550W 的海韵 FOCUS 550 GC。如果选择了 300W 左右的电源，以后换显卡时电源也得换了。</p>
<h3 id="7-蓝牙及无线网卡（可选）"><a href="#7-蓝牙及无线网卡（可选）" class="headerlink" title="7.蓝牙及无线网卡（可选）"></a>7.蓝牙及无线网卡（可选）</h3><p>为了在 Mac 系统下能有更好的体验，还需要购买一块带有蓝牙的板载无线网卡。市面上采用博通芯片的无线网卡对黑苹果支持比较好，所以我选择了博通的 BCM943602CS 。网卡插入 PCI-E 槽后，别忘了找到主板对应的 USB 接口，用连接线将网卡和主板连接，否则蓝牙就没用了。</p>
<h2 id="配置表一览"><a href="#配置表一览" class="headerlink" title="配置表一览"></a>配置表一览</h2><hr>
<table>
<thead>
<tr>
<th>物品</th>
<th>型号</th>
<th style="text-align:right">价格</th>
<th style="text-align:right">数量</th>
</tr>
</thead>
<tbody>
<tr>
<td>CPU</td>
<td>Intel i5-8600k</td>
<td style="text-align:right">￥1,869</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td>主板</td>
<td>Gigabyte Z370-HD3P</td>
<td style="text-align:right">￥999</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td>散热</td>
<td>CoolerMaster T400i</td>
<td style="text-align:right">Free(主板送)</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td>显卡</td>
<td>AMD RX580 超白金</td>
<td style="text-align:right">￥1,789</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td>SSD</td>
<td>Samsung PM961</td>
<td style="text-align:right">￥479</td>
<td style="text-align:right">2</td>
</tr>
<tr>
<td>内存</td>
<td>G.SKILL DDR4 8G</td>
<td style="text-align:right">￥559</td>
<td style="text-align:right">2</td>
</tr>
<tr>
<td>电源</td>
<td>Seasonic FOCUS 550GC</td>
<td style="text-align:right">￥439</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td>无线网卡</td>
<td>BCM943602CS</td>
<td style="text-align:right">￥185</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td>机箱</td>
<td>JONSBO U4</td>
<td style="text-align:right">￥279</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td>总价</td>
<td></td>
<td style="text-align:right">￥7,646</td>
</tr>
</tbody>
</table>
<h2 id="正经的安装指南"><a href="#正经的安装指南" class="headerlink" title="正经的安装指南"></a>正经的安装指南</h2><hr>
<h3 id="1-准备"><a href="#1-准备" class="headerlink" title="1.准备"></a>1.准备</h3><ul>
<li>在其中一个硬盘安装好 Win10 ；</li>
<li>一个 16GB 或以上的 U盘；</li>
<li>在 <a href="https://www.tonymacx86.com" target="_blank" rel="external">tonymac x86</a> 的网站上注册一个账号，方便爬贴。</li>
</ul>
<h3 id="2-制作-Mac-系统安装盘"><a href="#2-制作-Mac-系统安装盘" class="headerlink" title="2.制作 Mac 系统安装盘"></a>2.制作 Mac 系统安装盘</h3><p>① 在 Windows 系统下制作安装盘：</p>
<ul>
<li>下载 macOS Mojave 系统镜像文件；</li>
<li>下载 <code>TransMac</code> 软件用于制作安装盘。</li>
</ul>
<p>具体制作过程可以参考这篇文章：<a href="https://www.sqlsec.com/2018/08/clover.html" target="_blank" rel="external">B 站黑苹果安装教程</a> ，由于本人并不是通过这种方式制作安装盘的，所以不做过多叙述。</p>
<p>② 在 Mac 系统下制作安装盘（推荐！）：</p>
<ul>
<li>在 App Store 搜索 <code>macOS Mojave</code> 并下载；</li>
<li>在 <a href="https://www.tonymacx86.com/resources/categories/tonymacx86-downloads.3/" target="_blank" rel="external">tonymacx86 Downloads</a> 下载最新的 <code>UniBeast</code> 和 <code>MultiBeast</code> 软件。</li>
<li>在 <a href="https://mackie100projects.altervista.org/download-clover-configurator/" target="_blank" rel="external">Download Clover Configurator</a> 下载最新的 <code>Clover Configurator</code> 软件。</li>
</ul>
<p>PS：如果自己没有 Mac 设备，可以通过借同事朋友的或者安装虚拟机搭建环境。因为使用 Mac 自带的 App Store 下载的系统镜像最纯净，而且 Mac 系统下还有许多配套的黑苹果工具，制作起来更方便。</p>
<p>当系统镜像下载完成后，应用程序中会出现 <code>安装 macOS Mojave</code> 程序：</p>
<img src="/2019/01/29/building-a-hackintosh/Screenshot20190101.13.04.12.png" alt="Screenshot20190101.13.04.12" title="Screenshot20190101.13.04.12">
<p>插入 U盘 ，打开应用程序里的 <code>磁盘工具</code> ，在左上角的工具栏中找到并点击「显示」-&gt;「显示所有设备」，在展示的磁盘中选中刚才插入的 U盘：</p>
<img src="/2019/01/29/building-a-hackintosh/Screenshot20190101.14.53.39.png" alt="Screenshot20190101.14.53.39" title="Screenshot20190101.14.53.39">
<p>点击「抹掉」按钮，在弹出的对话框中输入名称：USB（可以随意起），格式选择「Mac OS 扩展（日志式）」，确认<br>「抹掉」。</p>
<img src="/2019/01/29/building-a-hackintosh/Screenshot20190101.14.53.59.png" alt="Screenshot20190101.14.53.59" title="Screenshot20190101.14.53.59">
<img src="/2019/01/29/building-a-hackintosh/Screenshot20190101.14.54.15.png" alt="Screenshot20190101.14.54.15" title="Screenshot20190101.14.54.15">
<p>打开 <code>UniBeast</code> 程序（ UniBeast 只能在英文环境下运行，所以暂时将系统语言调至英文）。无脑点击下一步，选好 U盘 和 Mojave 系统安装程序：</p>
<img src="/2019/01/29/building-a-hackintosh/Screenshot20190101.14.56.22.png" alt="Screenshot20190101.14.56.22" title="Screenshot20190101.14.56.22">
<p><strong>Bootloader</strong> 选择 UEFI Boot Mode：</p>
<img src="/2019/01/29/building-a-hackintosh/Screenshot20190101.14.56.47.png" alt="Screenshot20190101.14.56.47" title="Screenshot20190101.14.56.47">
<p><strong>Graphics</strong> 暂时不选，先跳过：</p>
<img src="/2019/01/29/building-a-hackintosh/Screenshot20190101.15.06.05.png" alt="Screenshot20190101.15.06.05" title="Screenshot20190101.15.06.05">
<p>最后一步确认无误后点击下一步，等读完条后系统盘就制作好了：</p>
<img src="/2019/01/29/building-a-hackintosh/Screenshot20190101.14.57.27.png" alt="Screenshot20190101.14.57.27" title="Screenshot20190101.14.57.27">
<img src="/2019/01/29/building-a-hackintosh/Screenshot20190101.14.57.37.png" alt="Screenshot20190101.14.57.37" title="Screenshot20190101.14.57.37">
<img src="/2019/01/29/building-a-hackintosh/Screenshot20190101.15.05.18.png" alt="Screenshot20190101.15.05.18" title="Screenshot20190101.15.05.18">
<p>系统盘制作好后，在 <code>Finder</code> 中会出现两个分区：</p>
<img src="/2019/01/29/building-a-hackintosh/Screenshot20190101.15.08.44.png" alt="Screenshot20190101.15.08.44" title="Screenshot20190101.15.08.44">
<p><strong>Install macOS Mojave</strong>：系统安装程序所在的分区。<br><strong>EFI</strong>：Bootloader 驱动、操作系统部分驱动等所在的分区，确保 U盘 的安装程序能被正常引导，安装好系统后能正常启动。</p>
<p>此时可将之前下好的 <code>MultiBeast</code> 和 <code>Clover Configurator</code> 拖入 <strong>Install macOS Mojave</strong> 分区中，这两个软件的作用分别是：</p>
<img src="/2019/01/29/building-a-hackintosh/Screenshot20190101.16.06.18.png" alt="Screenshot20190101.16.06.18" title="Screenshot20190101.16.06.18">
<p><strong>MultiBeast</strong>：根据需要将相应的 <code>kext</code> 驱动安装至操作系统中。<br><strong>Clover Configurator</strong>：配置 SMBIOS ，给驱动打补丁，设置 Clover 引导主题等。</p>
<h3 id="3-修改-BIOS-设置"><a href="#3-修改-BIOS-设置" class="headerlink" title="3.修改 BIOS 设置"></a>3.修改 BIOS 设置</h3><p>在安装系统之前，先进入 BIOS 界面修改设置，否则安装系统的过程中可能会失败。</p>
<ul>
<li>开机后按住 F12 进入 BIOS 界面；</li>
<li>储存并离开 -&gt; 载入最佳预设值；</li>
<li>M.I.T -&gt; 高级内存设定 -&gt; Extreme Memory Profile(X.M.P.)：Profile1</li>
<li>BIOS 功能 -&gt; 快速启动：关闭</li>
<li>BIOS 功能 -&gt; CSM 支持：关闭</li>
<li>集成外设 -&gt; Trusted Computing -&gt; Security Device Support：关闭</li>
<li>集成外设 -&gt; 网络 Stack 程序 -&gt; 网络堆叠：关闭</li>
<li>集成外设 -&gt; USB 程序 -&gt; Legacy USB Support：自动</li>
<li>集成外设 -&gt; USB 程序 -&gt; XHCI Hand-off：开启</li>
<li>芯片组 -&gt; Vt-d：关闭</li>
<li>芯片组 -&gt; Wake on LAN Enable：关闭</li>
<li>芯片组 -&gt; IOAPIC 24-119 Entries：启动</li>
<li>储存并离开 -&gt; 储存并离开设定</li>
</ul>
<h3 id="4-安装-Mac-系统"><a href="#4-安装-Mac-系统" class="headerlink" title="4.安装 Mac 系统"></a>4.安装 Mac 系统</h3><p>插入 U盘 并开机，按住 F12 后选择从 U盘 启动。进入 Clover 的引导界面，找到 <strong>Boot macOS Install from Install macOS Mojave</strong> 按下回车，Mac 系统的安装程序会自动运行，耐心等待读条完成。</p>
<p>读条完成后就会看到 <strong>macOS 实用工具</strong> 程序了。</p>
<p>先选择第四个 <code>磁盘工具</code> 将需要安装的硬盘格式化。操作方式和之前一样，选中要安装到的硬盘（不要选错安装了 Windows 系统的硬盘），点击「抹掉」按钮，在弹出的对话框中输入名称：Hackintosh HD，格式选择「Mac OS 扩展（日志式）」，确认「抹掉」。</p>
<p>格式化完成后关闭 <code>磁盘工具</code> ，选择 <code>安装 macOS</code> ，根据提示选中刚才格式化的硬盘并点击「安装」，接着又是一段漫长的等待。在这期间机器会自动重启几次，系统还没安装完成，重启后在 Clover 引导界面找到 <strong>Boot macOS Install from Hackintosh HD</strong> 按下回车继续安装。</p>
<p>待全部安装结束后，选择 <strong>Boot macOS from Hackintosh HD</strong> 从硬盘启动后来到欢迎界面。在 Wi-Fi 设置时先跳过，暂时不连接到互联网，之后再进行一些基础设置后终于成功进入系统了。</p>
<p>此时系统已经初步安装完成，但是显卡、声卡不能驱动，USB 端口有些不能识别，好在无线网卡和蓝牙是免驱的。先连上 Wi-Fi ，然后将之前放在 U盘 的 <code>MultiBeast</code> 和 <code>Clover Configurator</code> 两个程序拖出来放到 <code>Finder</code> 的应用程序里，接下来就是配置剩余的驱动了。</p>
<h3 id="5-配置驱动"><a href="#5-配置驱动" class="headerlink" title="5.配置驱动"></a>5.配置驱动</h3><p>打开 <code>MultiBeast</code> 选择需要注入的驱动：</p>
<ol>
<li>Quick Start &gt; Clover UEFI Boot Mode</li>
<li>Drivers &gt; Audio &gt; AppleALC</li>
<li>Drivers &gt; Audio &gt; 100 / 200 / 300 / Series Audio Support(HDAS -&gt; HDEF)</li>
<li>Drivers &gt; Network &gt; Intel &gt; IntelMausiEthernet v2.4.0</li>
<li>Drivers &gt; USB &gt; Remove XHCI USB Port Limit</li>
<li>Drivers &gt; USB &gt; USBInjectAll</li>
<li>Bootloaders &gt; Clover UEFI Boot Mode</li>
<li>Customize &gt; Graphics Configuration &gt; Core Graphics Fixup AKA WhateverGreen</li>
<li>Customize &gt; System Definitions &gt; Mac Pro &gt; Mac Pro 6,1</li>
<li>Build &gt; Install</li>
</ol>
<p>下面来逐一解释一下每个选项的作用：</p>
<ul>
<li>第一项选择 UEFI 启动模式的 Clover BootLoader 安装到硬盘上，避免每次启动 Mac 系统都要通过 U 盘；</li>
<li>第二、三项安装声卡驱动；</li>
<li>第四项安装有线网卡驱动；</li>
<li>第五、六项解除 USB 端口限制，启用所有 USB 端口；</li>
<li>第八项安装显卡驱动（Lilu.kext 和 WhateverGreen），支持AMD独显、Intel核显；</li>
<li>第九项选择系统识别机型，如果是装有独立显卡的建议选择 Mac Pro 系列，如果是使用核显的可以选择 iMac 系列；</li>
<li>最后安装到硬盘即可。</li>
</ul>
<p><strong>PS:待安装完毕之后重启系统，之前注入的驱动才能生效。</strong></p>
<p>至此，Mac 系统的安装才大体完成，接下来是小细节的完善。</p>
<h3 id="6-设置-Clover-为第一引导"><a href="#6-设置-Clover-为第一引导" class="headerlink" title="6.设置 Clover 为第一引导"></a>6.设置 Clover 为第一引导</h3><p>从 Mac 系统重启后，会发现系统的第一引导还是 Windows。此时我们需要修改引导顺序，使得默认启动的引导是 Clover。这里要用到的软件分别为 <code>BOOTICE</code> 和 <code>DiskGenius</code> ，为了避免干扰先将 U 盘拔出。</p>
<p>在 Windows 系统下打开 <code>DiskGenius</code> ，给安装了 Mac 系统的硬盘分配一个盘符：</p>
<img src="/2019/01/29/building-a-hackintosh/screenshot1.PNG" alt="screenshot1" title="screenshot1">
<p>接着打开 <code>BOOTICE</code> 选择 UEFI -&gt; 修改启动序列 -&gt; 添加：</p>
<img src="/2019/01/29/building-a-hackintosh/screenshot2.PNG" alt="screenshot2" title="screenshot2">
<p>找到 EFI 分区里 <code>CLOVER</code> 文件夹内的 <code>CLOVERX64.efi</code> 文件，选择并打开：</p>
<img src="/2019/01/29/building-a-hackintosh/screenshot3.PNG" alt="screenshot3" title="screenshot3">
<p>对菜单标题重命名，然后将其上移至第一位，点击 <code>保存当前启动项设置</code> ，重启后默认加载的就是 Clover 的引导了。</p>
<img src="/2019/01/29/building-a-hackintosh/screenshot4.PNG" alt="screenshot4" title="screenshot4">
<h2 id="完善驱动以及其他优化"><a href="#完善驱动以及其他优化" class="headerlink" title="完善驱动以及其他优化"></a>完善驱动以及其他优化</h2><hr>
<p>开始之前先简单介绍一下用到的软件：</p>
<p><strong>Hackintool</strong>：包含有查询音频 Layout-id，定制 USB 端口限制补丁等功能的工具类软件。</p>
<p><strong>Clover Configurator</strong>：<code>config.plist</code> 的文件编辑器。通过修改 <code>config.plist</code> 文件来配置一些系统参数、设置 SMBIOS 信息、更换 Clover 引导界面的主题等。可以挂载隐藏的 EFI 分区，找到 EFI -&gt; CLOVER 路径下正在使用的 <code>config.plist</code> 文件，每次保存修改后重启系统即可生效。</p>
<p><strong>强烈建议每次修改前先备份一次 <code>config.plist</code> 文件，如果重启后进入不了系统还可以通过 Clover 的引导界面更换 <code>config.plist</code> 文件，或者从之前制作的 U 盘启动。</strong></p>
<h3 id="1-修补音频-Layout-id"><a href="#1-修补音频-Layout-id" class="headerlink" title="1.修补音频 Layout-id"></a>1.修补音频 Layout-id</h3><p>之前我们已经安装了最新的 Lilu 和 AppleALC ，如果此时还没有声音说明还需要修复音频 Layout-id 。</p>
<p>首先打开 <strong>Clover Configurator</strong> ，挂载硬盘的 EFI 分区，打开 CLOVER 文件夹下的 <code>config.plist</code> 文件，选中 <code>Devices</code> 栏。然后将 ResetHDA 勾选，在 Audio 下的 Inject 下拉框中填入符合的 id 保存即可。</p>
<img src="/2019/01/29/building-a-hackintosh/Screenshot20190127.22.36.56.png" alt="Screenshot20190127.22.36.56" title="Screenshot20190127.22.36.56">
<p>那应该填入的 id 是多少呢？打开 <strong>Hackintool</strong> ，选择 General -&gt; Audio 。此时我们可以看到主板声卡的供应商和型号，我的板载声卡是 Realtek ALC1220 ，点击 Layout ID 一栏的下拉框可以看到符合这个型号的所有 id 。</p>
<img src="/2019/01/29/building-a-hackintosh/Screenshot20190127.22.39.24.png" alt="Screenshot20190127.22.39.24" title="Screenshot20190127.22.39.24">
<p>将这些 id 挨个尝试着填入到 <code>config.plist</code> 中保存并重启，直到声卡能正常驱动为止。</p>
<h3 id="2-开启HiDPI"><a href="#2-开启HiDPI" class="headerlink" title="2.开启HiDPI"></a>2.开启HiDPI</h3><p>什么是 HiDPI ？简单的说就是打开 HiDPI 之后，在同样分辨率的前提下，显示效果更佳细腻。这项功能本来只在 4k 分辨率以上才会默认开启，现在我们可以通过别人制作好的脚本在 2k、1080P 分辨率下手动开启。</p>
<img src="/2019/01/29/building-a-hackintosh/Screenshot20190127.23.05.21.png" alt="Screenshot20190127.23.05.21" title="Screenshot20190127.23.05.21">
<p>项目地址：<br><a href="https://github.com/xzhih/one-key-hidpi" target="_blank" rel="external">GitHub - xzhih/one-key-hidpi: Enable macOS HiDPI</a></p>
<p>使用方法：<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">sh -c &quot;$(curl -fsSL https://raw.githubusercontent.com/xzhih/one-key-hidpi/master/hidpi-zh.sh)&quot;</div></pre></td></tr></table></figure></p>
<p>在终端输入命令按下回车，再根据提示选择即可。</p>
<img src="/2019/01/29/building-a-hackintosh/Screenshot20190127.23.14.12.png" alt="Screenshot20190127.23.14.12" title="Screenshot20190127.23.14.12">
<h3 id="3-设置-SMBIOS"><a href="#3-设置-SMBIOS" class="headerlink" title="3.设置 SMBIOS"></a>3.设置 SMBIOS</h3><p>打开 <strong>Clover Configurator</strong> ，挂载硬盘的 EFI 分区，打开 <code>config.plist</code> ，选中 SMBIOS 栏。里面有设备型号、Bios等信息，当然这些信息都不需要自己填，点击最右边中间的按钮弹出选择菜单，根据自己的配置信息选择一个最接近的设备。</p>
<img src="/2019/01/29/building-a-hackintosh/6F6F076F.png" alt="SMBIOS" title="SMBIOS">
<p>因为我安装了独显，所以选择了同样使用独显的 MacPro 作为我的 SMBIOS，最后保存重启即可。</p>
<h3 id="4-隐藏其他启动项"><a href="#4-隐藏其他启动项" class="headerlink" title="4.隐藏其他启动项"></a>4.隐藏其他启动项</h3><p>打开 <code>config.plist</code> ，选中 Gui 栏，找到 Hide Volume 项，添加想要隐藏的分区，最后保存重启。</p>
<img src="/2019/01/29/building-a-hackintosh/Screenshot20190127.23.29.17.png" alt="Screenshot20190127.23.29.17" title="Screenshot20190127.23.29.17">
<h2 id="其他问题"><a href="#其他问题" class="headerlink" title="其他问题"></a>其他问题</h2><hr>
<ul>
<li>睡眠唤醒：关机重启正常，显示器睡眠唤醒正常，但是电脑睡眠后CPU和风扇会短暂睡眠又突然唤醒，无奈只能讲电脑进入睡眠的时间调成“永不”。</li>
<li>蓝牙：正常，连接鼠标可以使用。</li>
<li>AirDrop：没有试用过，按理说蓝牙能使用这个功能应该也是能用的。</li>
<li>iMessage：没有试用，未知。</li>
<li>USB 3.0：正常，但有一两个端口不能识别。</li>
</ul>
<p>现在使用黑苹果系统已经有四个月左右的时间了，只能说按照推荐配置组装的电脑兼容性就是好，期间经历了两次无痛升级，一切功能正常，其他用不到的功能也不打算折腾了，毕竟稳定才是王道。</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><hr>
<ul>
<li><a href="https://www.tonymacx86.com/threads/unibeast-install-macos-mojave-on-any-supported-intel-based-pc.259381/" target="_blank" rel="external">UniBeast: Install macOS Mojave on Any Supported Intel-based PC</a></li>
<li><a href="https://www.tonymacx86.com/threads/success-gigabyte-z370-gaming-7-intel-core-i7-8700k-rx-580-2x-dell-p2715q-4k-60hz.252989/" target="_blank" rel="external">[Success] GIGABYTE Z370 Gaming 7 + Intel Core i7-8700K + RX 580 + (2x) Dell P2715Q 4k @ 60Hz</a></li>
<li><a href="https://www.bilibili.com/video/av36812546" target="_blank" rel="external">黑苹果教程，从零开始组装你的黑苹果电脑！（上）</a></li>
<li><a href="https://www.bilibili.com/video/av36818985" target="_blank" rel="external">黑苹果教程，完美告别Windows走进Mac os！（下）</a></li>
<li><a href="https://www.sqlsec.com/2018/08/clover.html" target="_blank" rel="external">B 站黑苹果安装教程</a></li>
<li><a href="https://www.sqlsec.com/2018/07/hackintosh.html" target="_blank" rel="external">黑苹果 Clover 驱动配置文件分享</a></li>
<li><a href="https://blog.daliansky.net/Use-HIDPI-to-solve-sleep-wake-up-black-screen,-Huaping-and-connect-the-external-monitor-the-correct-posture.html" target="_blank" rel="external">使用HIDPI解决睡眠唤醒黑屏、花屏及连接外部显示器的正确姿势</a></li>
<li><a href="https://blog.daliansky.net/Intel-FB-Patcher-tutorial-and-insertion-pose.html" target="_blank" rel="external">Hackintool(原Intel FB-Patcher)使用教程及插入姿势</a></li>
</ul>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2019-01-29</span><i class="fa fa-tag"></i><a href="/tags/Hackintosh/" title="Hackintosh" class="tag">Hackintosh </a></div></div></div></div><div class="share"><div class="weibo"><a href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey='].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));" class="fa fa-weibo"></a></div><div class="twitter"><a href="http://twitter.com/home?status=,https://zerdaket.github.io/2019/01/29/building-a-hackintosh/,Zerdaket's Blog,如何打造一台 CustoMac Hackintosh,;" class="fa fa-twitter"></a></div></div><div class="pagination"><ul class="clearfix"><li class="next pagbuttons"><a role="navigation" href="/2017/12/16/effective-java-2/" title="Effective Java 2 —— 避免 Android 中的内存泄漏" class="btn">下一篇</a></li></ul></div></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script></body></html>